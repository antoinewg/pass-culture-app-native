# SVG Component generator

This module is designed to be called by `yarn generate:svg` from the root of the project. This then calls the bash script [`svg_component_generator.sh`](./svg_component_generator.sh), using the [SVGR](https://react-svgr.com/docs/cli/) tool, configured with [`template.js`](./template.js) and [`.svgrrc.json`](./.svgrrc.json).

The documentation about the options chosen in the script are explained [here](https://react-svgr.com/docs/options/).

The most tricky part is the [`template.js`](./template.js). The basic logic about templating is explained in the [SVGR doc](https://react-svgr.com/docs/custom-templates/). In our implementation, there are two parts:

1. For the particular case of linear-gradient/radial-gradient, an SVG has a fixed `id`. However, if the SVG is used many times in the app, there will be conflicts between the same ids. To avoid that, we generate a new id on flight for every instance of a React Component of an SVG. Therefore, we replace these fixed ids by variables, initialized with a home-made `svgIdentifier` method. To do so, we edit the AST of the component generated by SVGR (the code structure of the future React Component) via Babel, and replace directly in it the `id` with the corresponding variable.

2. Then, in the return statement, we generate the whole structure of the future React Component, with Typescript typing and the right props.

Finally, at the end of [`svg_component_generator.sh`](./svg_component_generator.sh), we replace the default name of the generated component `SvgComponent` by the provided one.
